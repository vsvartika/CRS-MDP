%perfomance vs T
clear all ; close all;

T_arr= [ 2     8    14    20    26    32    38    44 ];

rew_arr =    [0.0707    1.0469    1.2830    1.3281    1.3268    1.3136    1.3211    1.3251    ];


cost_arr =    [ 0.2483    0.6000    0.6000    0.6000    0.6000    0.6000    0.6000    0.6000  ];

B = 0.6;
sz =size(T_arr);
B_arr = B*ones(1,sz(2));

a_init = [ 0.2857    0.2381    0.1905    0.1429    0.0952    0.0476];

figure(1)
plot(T_arr,rew_arr,'b--*', 'LineWidth',1.5, 'MarkerSize',10)
hold on
plot(T_arr,cost_arr,'r--o','LineWidth',1.5,'MarkerSize',10)
hold on
plot(T_arr,B_arr,'LineWidth',1.5)
legend('Optimal Reward','Cost','Constraint')
xlabel('terminal time T')
xlim([2,44]);
ylim([0,2]);
hold off





%input file used
% clear all
% 
% %====================================
% N_s = 6;
% 
% Cost_risk_factor_extra = .1;
% %keeping number of actions same in all the states
% N_a = N_s;
% N_a_arr = N_s:-1:1; %[6, 5, 4, 3, 2, 1];
% 
% 
% %time steps
% T= 50;
% 
% %Discount factor
% beta=0.7; 
% bet = beta;
% 
% %risk factor6
% gamma =.5;
% 
% gam = gamma;
% 
% %bound
% B_l=6; %5.0467;
% B=exp (gamma*B_l*Cost_risk_factor_extra); 
%  
% Max_cost = 10000;
%   
% %=================================
% 
% %initial distribution
% a_init=N_s:-1:1;%a_init (1) = .1;
% a_init=a_init/sum(a_init);
% 
% 
% if 1==0
%  
% 
%     %transition probability
%     P=ones(N_s,N_a,N_s);
% 
%     for s=1:N_s
%         for a=1:N_s
%             P(s,a,:)=(1:N_s)+s+a;
%             P(s,a,:) =  P(s,a,:)/sum(P(s,a,:));
%         end
%     end
% 
% 
%     % Transitions to state 1
%     P(:,:,1) = [        1.0000         0.7         0.49          0.343     0.2401    0.16801
%         0.7000         0.49        0.343         0.2401    0.16801   0
%         0.4900         0.343       0.2401        0.16801   0         0
%         0.3430         0.2401      0.16807       0         0         0
%         0.2401         0.16807         0         0         0         0
%         0.1681         0            0            0         0         0];
% 
% 
%     % Transitions to state 2
%     P(:,:,2) =[
%              0         0.3         0.21         0.147          0.1029    0.0720
%         0.3000         0.21        0.147        0.1029         0.0720    0
%         0.2100         0.147       0.1029       0.0720         0         0
%         0.1470         0.1029      0.0720         0            0         0
%         0.1029         0.0720      0             0             0         0
%         0.0720         0           0             0             0         0];
% 
% 
%     P(:,:,3) =[
% 
%     0	    0	    0.3	    0.21	0.147	0.1029
%     0	    0.3	    0.21	0.147	0.1029	0
%     0.3	    0.21	0.147	0.1029	0	    0
%     0.21	0.147	0.1029	0	    0	    0
%     0.147	0.1029	0	    0	    0	    0
%     0.1029	0	    0	    0	    0	    0]; 
% 
% 
%     P(:,:,4) =[
%             0	    0	    0	    0.3	    0.21	0.147
%             0	    0	    0.3	    0.21	0.147	0
%             0	    0.3	    0.21	0.147	0	    0
%             0.3	    0.21	0.147	0	    0	    0
%             0.21	0.147	0	    0	    0	    0
%             0.147	0	    0	    0	    0	    0];
% 
% 
%     P(:,:,5) = [
%              0         0         0         0         0.3       0.21
%              0         0         0         0.3       0.21      0
%              0         0         0.3       0.21      0         0
%              0         0.3       0.21      0         0         0
%         0.3000         0.21      0         0         0         0
%         0.2100         0         0         0         0         0 ];
% 
% 
%     P(:,:,6) =[
%              0         0         0         0         0         0.3
%              0         0         0         0         0.3         0
%              0         0         0         0.3         0         0
%              0         0         0.3         0         0         0
%              0         0.3         0         0         0         0
%             0.3        0         0         0         0         0];
% 
%     % rewards is a matrix of size (s x a) where s is states and a is actions
%     %rng(2);
% 
%     for i = 1:N_s
% 
%       for a = 1:N_a
%           sm = sum (P(i,a,:));
%           if sm > 0
%               P(i,a, :) = P(i, a, :) / sm;
%           end
%       end
%     end
% 
% 
%     % for i = 1:N_s
%     %     for j = 1:N_a
%     %         rewards(i,j) =  1 *i *1/j ;
%     % %rng(1);
%     %         cost (i,j)= min ( i * 1/j *1.9 , 4) ;
%     %     end
%     % end
% 
% 
%     rewards = [ 0	        0.315	    0.5405	    0.77335	    1.011345	1.2529415
%                 0.015	    0.3405	    0.57335	    0.811345	1.0529415	0
%                 0.0405  	0.37335	    0.611345	0.8529415	0	        0
%                 0.07335	    0.411345	0.6529415	0	        0	        0
%                 0.111345	0.4529415	0	        0	        0	        0
%                 0.1529415	0	        0	        0	        0	        0];
% 
% 
% 
% 
%     cost = [9.997746066	    9.097746066	    7.837746066	    6.514746066	    5.279946066 	4.199496066
%             9.097746066	    7.837746066	    6.514746066 	5.279946066	    4.199496066 	0
%             7.837746066	    6.514746066	    5.279946066	    4.199496066	     0              0
%             6.514746066	    5.279946066 	4.199496066	    0                0              0
%             5.279946066	    4.199496066	    0               0                0              0 
%             4.199496066 	0 0 0 0 0 ];
% 
%     %rewards = cost* 10;
% 
% 
%     tmp (1, :) = 0;
%     for s = 1:N_s
%         %tmp (s, :) = (s-1)*0.1+1;
%         tmp (s, :) =  1;
%     end
%     tmp = tmp.*gt(rewards, 0);
%     rewards = -rewards ; %-tmp; 
% 
%     if 1==0
% 
%         NA=0;
%         rewards =[ 0.000000 0.630000 1.081000 1.546700 2.022690 2.505883
%                    0.030000 0.681000 1.146700 1.622690 2.105883       NA
%                    0.081000 0.746700 1.222690 1.705883       NA       NA
%                    0.146700 0.822690 1.305883       NA       NA       NA
%                    0.222690 0.905883       NA       NA       NA       NA
%                    0.305883       NA       NA       NA       NA       NA];
% 
%         cost =[3.332582     3.032582    2.612582    2.171582    1.759982    1.399832
%                 3.032582    2.612582    2.171582    1.759982    1.399832       NA
%                 2.612582    2.171582    1.759982    1.399832       NA          NA
%                 2.171582    1.759982    1.399832       NA          NA          NA
%                 1.759982    1.399832       NA          NA          NA          NA
%                 1.399832       NA          NA          NA          NA          NA];
% 
%     end
% else
%     Inventory
%     for i = 1:N_s
% 
%       for a = 1:N_a
%           sm = sum (P(i,a,:));
%           if sm > 0
%               P(i,a, :) = P(i, a, :) / sm;
%           end
%       end
%     end
% end
% 
%  
% rew_T=zeros(1,N_s);
% cost_T=zeros(1,N_s);
%  
